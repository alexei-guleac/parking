package com.company.public_.generated;

import com.company.public_.Public_Application;
import com.company.public_.Public_ApplicationBuilder;
import com.company.public_.parking.public_.confirmation_tokens.ConfirmationTokensManager;
import com.company.public_.parking.public_.parking_lots.ParkingLotsManager;
import com.company.public_.parking.public_.statistics.StatisticsManager;
import com.speedment.common.annotation.GeneratedCode;
import com.speedment.enterprise.datastore.runtime.DataStoreBundle;
import com.speedment.enterprise.datastore.runtime.DataStoreComponent;
import com.speedment.enterprise.plugins.json.JsonBundle;
import com.speedment.enterprise.plugins.json.JsonComponent;
import com.speedment.runtime.core.ApplicationBuilder;
import com.speedment.runtime.core.component.ProjectComponent;
import com.speedment.runtime.join.JoinBundle;
import com.speedment.runtime.join.JoinComponent;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.core.env.Environment;

/**
 * The spring configuration file
 * <p>
 * This file has been automatically generated by Speedment. Any changes made to
 * it will be overwritten.
 *
 * @author Speedment
 */
@GeneratedCode("Speedment")
public class GeneratedPublic_Configuration {

    protected static final String URL_PROPERTY = "spring.speedment.url";
    protected static final String HOST_PROPERTY = "spring.speedment.host";
    protected static final String PORT_PROPERTY = "spring.speedment.port";
    protected static final String USERNAME_PROPERTY = "spring.speedment.username";
    protected static final String PASSWORD_PROPERTY = "spring.speedment.password";
    protected static final String LICENSE_PROPERTY = "spring.speedment.license";
    protected static final String LOGGING_PROPERTY = "spring.speedment.logging";
    protected @Autowired Environment env;

    @Bean
    public Public_Application getApplication() {
        return getApplicationBuilder()
                .withPassword("paskal")
                .withLogging(ApplicationBuilder.LogType.APPLICATION_BUILDER)
                .withLogging(ApplicationBuilder.LogType.STREAM)
                .withLogging(ApplicationBuilder.LogType.STREAM_OPTIMIZER)
                .build();
    }

    public Public_ApplicationBuilder getApplicationBuilder() {
        final Public_ApplicationBuilder builder =
            new Public_ApplicationBuilder()
                .withBundle(DataStoreBundle.class)
                .withBundle(JsonBundle.class)
                .withBundle(JoinBundle.class);

        if (env.containsProperty(URL_PROPERTY)) {
            builder.withConnectionUrl(env.getProperty(URL_PROPERTY));
        }

        if (env.containsProperty(HOST_PROPERTY)) {
            builder.withIpAddress(env.getProperty(HOST_PROPERTY));
        }

        if (env.containsProperty(PORT_PROPERTY)) {
            builder.withPort(Integer.parseInt(env.getProperty(PORT_PROPERTY)));
        }

        if (env.containsProperty(USERNAME_PROPERTY)) {
            builder.withUsername(env.getProperty(USERNAME_PROPERTY));
        }

        if (env.containsProperty(PASSWORD_PROPERTY)) {
            builder.withPassword(env.getProperty(PASSWORD_PROPERTY));
        }

        if (env.containsProperty(LICENSE_PROPERTY)) {
            builder.withParam("licenseKey", env.getProperty(LICENSE_PROPERTY));
        }

        if (env.containsProperty(LOGGING_PROPERTY)
        &&  Boolean.valueOf(env.getProperty(LOGGING_PROPERTY))) {
            builder
                .withLogging(ApplicationBuilder.LogType.STREAM)
                .withLogging(ApplicationBuilder.LogType.APPLICATION_BUILDER)
                .withLogging(ApplicationBuilder.LogType.CONNECTION)
                .withLogging(ApplicationBuilder.LogType.STREAM_OPTIMIZER);
        }

        return builder;
    }

    @Bean
    public ProjectComponent getProjectComponent(Public_Application app) {
        return app.getOrThrow(ProjectComponent.class);
    }

    @Bean
    public JsonComponent getJsonComponent(Public_Application app) {
        return app.getOrThrow(JsonComponent.class);
    }

    @Bean
    public DataStoreComponent getDataStoreComponent(Public_Application app) {
        return app.getOrThrow(DataStoreComponent.class);
    }

    @Bean
    public JoinComponent getJoinComponent(Public_Application app) {
        return app.getOrThrow(JoinComponent.class);
    }

    @Bean
    public ConfirmationTokensManager getConfirmationTokensManager(Public_Application app) {
        return app.getOrThrow(ConfirmationTokensManager.class);
    }

    @Bean
    public ParkingLotsManager getParkingLotsManager(Public_Application app) {
        return app.getOrThrow(ParkingLotsManager.class);
    }

    @Bean
    public StatisticsManager getStatisticsManager(Public_Application app) {
        return app.getOrThrow(StatisticsManager.class);
    }
}
